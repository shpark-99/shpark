<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kakao Maps API 테스트</title>
    <style>
        #map { width: 100%; height: 400px; }
    </style>
</head>
<body>
    <h1>Kakao 지도 테스트</h1>
    <div id="map"></div>

    <script>
        function loadKakaoMapsAPI(callback) {
            if (window.kakao && window.kakao.maps) {
                console.log("✅ Kakao Maps API 이미 로드됨");
                callback();
                return;
            }

            const script = document.createElement("script");
            script.src = "https://dapi.kakao.com/v2/maps/sdk.js?appkey=a50e768349b68eac92037c8858d7a462&libraries=services,geometry";
            script.async = true;
            script.onload = () => {
                console.log("✅ Kakao Maps API 로드 완료");
                callback();
            };
            script.onerror = () => console.error("❌ Kakao Maps API 로드 실패");
            document.head.appendChild(script);
        }

        function initMap() {
            if (!window.kakao || !window.kakao.maps) {
                console.error("❌ Kakao Maps API가 정상적으로 로드되지 않음");
                return;
            }

            if (!window.kakao.maps.geometry) {
                console.error("❌ Kakao Maps API의 'geometry' 라이브러리가 로드되지 않음");
                return;
            }

            console.log("✅ initMap 실행됨");

            const container = document.getElementById("map");
            const options = {
                center: new kakao.maps.LatLng(37.5665, 126.978), // 기본 위치 (서울)
                level: 3,
            };

            const map = new kakao.maps.Map(container, options);
            console.log("✅ 지도 생성 완료");
        }

        loadKakaoMapsAPI(initMap);
    </script>
</body>
</html>
